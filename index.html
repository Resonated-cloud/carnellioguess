<!DOCTYPE HTML>
<div id="loading" style="display: none" class="overlay">
 <div class="popup">
  Loading...
</div>
</div>

<audio id="bgm"></audio>
<audio id="bgm" loop>
  <source src="songs/Gatherundersnight.mp3" preload="auto" type="audio/mpeg">
</audio>



<meta name="viewport" content="
  width=device-width,
  initial-scale=1.0,
  maximum-scale=1.0,
  user-scalable=no">
<title>hi</title>
<button id="updatelogbutton" onclick="openUL()">Update Log</button>
<center>
<div id="UpdateLog" class="overlay" style="display:none;">
  <!-- Popup box -->
  <div class="Update_Log">
    <h2 id="UpdateLogTitle">Update Log</h2>
    <p id="UpdateLogText">PATCH 04/02/2026: "I can upload musics wow!"<br></br>Misc : Added audio Musics from phase 1 - 4 (music setting will be added soon)<br></br>Misc : Added audio for Decapitate fail.<br></br>(!!!) Added Wandering Flame mechanic (still WIP in term of design.)<br></br>Nerfed Evil Fracture click req: 10 -> 8 clicks<br>Evil Fracture Time Compensation: 4 -> 5 seconds.<br></br>Bugfix : Fixed image loading lately, therefore leading to misarranged combos.<br></br>Bugfix : Fixed Timer keeps going down despite opening Update Log.

<br></br>-- PATCH 02/02/2026: "hello QTE" -- <br></br> Misc : Added a temporary Popup when you open the website <br></br>Misc : Added Update Log (no shit)<br></br>Changed Evil Fracture mechanic to a QTE spam. (original EF Mechanic will be moved to other attack.)<br></br>Evil Fracture Compensation time is only 4 extra seconds now.<br></br>Shadow Riposte now counterattacks you if you send during the counter.<br></br>Bugfix : Fixed Timer Handling giving extra 4 seconds every single time (oops)</p>

    <button onclick="closeUL()">Close</button>
  </div>
</div>


<style>
.orbit {
  pointer-events: none;
  width: 450px;
  height: 450px;
  position: fixed;
  top: 50%;
  left: 50%;

  animation: spin 1s linear infinite;
  border: 0px solid red;
}

.orbiter {
  width: 20px;
  height: 20px;
  animation: spin 1s linear infinite reverse;
  position: absolute;
  top: 100%;
  left: 100%;
  background-color: purple;
}

.ghost {
  opacity: 0.4;
}


@keyframes spin {
  from { transform: translate(-50%, -50%) rotate(0deg); }
  to   { transform: translate(-50%, -50%) rotate(360deg); }
}

.paused {
  animation-play-state: paused;
}


@keyframes strike {
  from {
    transform: translate(-50%, -50%) rotate(var(--angle)) translateX(200px);
  }
  to {
    transform: translate(-50%, -50%) rotate(var(--angle)) translateX(260px);
  }
}


</style>
<div id="popupOverlay" class="overlay" style="display:none;">
  <!-- Popup box -->
  <div class="popup">
    <h2 id="popupTitle">Popup Title</h2>
    <p id="popupText">Popup content goes here</p>

    <button onclick="closePopup()">Close</button>
  </div>
</div>

<div id="EFOverlay" class="overlay" style="display:none;">
  <!-- Popup box -->
  <div class="popup">
    <h2 id="EFTitle">Popup Title</h2>
    <p id="EFText">Popup content goes here</p>
<p id="EFText2"><span id="progress">8</span>/8</p>
<p id="EFText2">Timer Remaining: <span id="EFtimer"></span></p>

    <button onclick="EFQTE()">Break</button>
  </div>
</div>


<h1>guess carnellio combo thing</h1>
<h2>BOSS : Carnellio</h2>
<p id=healthbar>Health : <span id = "health">12550000</span><br>
<h2 id=dialogue style="color: #5d00ff;"></h2><br>
<img src = "images/CARNELLIO.webp" width = "100" height = "100">
<div id = "imgattack">
</div>
<p>What's this attack called?</p>
<p id="timerlabel"><span id = "timer">150</span><span id="timerstatus"></span></p> 
</center>
<p id="lifecounter">Life: <span id="life1">5</span> / <span id="life2">5</span><span id="lifenews"></span><span id="statuseffect"></span></p> 
<center>
<p id="confirm">Current combo: <span id="ESl"></span></p>
<div id="answer">
<p id="atk" style="color: #5d00ff;"> </p>
</div>
<p id="msgthing"><span id="msg"></span><span id="damageshow"></span><span id="damagemultishow"></span></p>
<button id = "send" onclick="check()" style="width: 60px; height: 30px;" >Send</button>
<button id = "Backspace" onclick="backspace()" style="width: 100px; height: 30px;" >Backspace</button>
<button id = "clear" onclick="clearcombo()" style="width: 80px; height: 30px;" >Clear All</button>
<button id = "phasetest" onclick="damagecarn(1640000)">Phase 2 damage thing</button>
<button id = "phasetest" onclick="EvilFracture(true)">EF Qte</button>
<button id = "phasetest" onclick="createWF()">WF test</button>
<br></br>
<div>
<p>Phase 1 attacks :</p>
<left>
<button id ="SS" onclick="attack('Sweeping Seize', 'SS')" style="width: 120px; height: 30px;" >Sweeping Seize</button>
<button id ="TR" onclick="attack('Tyrant Revolver', 'TR')" style="width: 120px; height: 30px;" >Tyrant Revolver</button>
<button id ="WF" onclick="attack('Wandering Flame', 'WF')" style="width: 130px; height: 30px;" >Wandering Flame</button>
<button id ="Decap" onclick="attack('Decapitate', 'Decap')" style="width: 100px; height: 30px;" >Decapitate</button>
<button id ="VV" onclick="attack('Violet Viper', 'VV')" style="width: 100px; height: 30px;" >Violet Viper</button>
<button id ="Fakeout" onclick="attack('Fakeout', 'Fakeout')" style="width: 100px; height: 30px;" >Fakeout</button>
<button id ="Dash" onclick="attack('Dash', 'Dash')" style="width: 100px; height: 30px;" >Dash</button>
<br></br>
</left>
</div>
<p id = "phase2text" style="display: none";>Phase 2 Attacks :</p>
<button id ="SV" style="display: none"; onclick="attack('Shadow Viper', 'SV')" >Shadow Viper</button>
<button id ="SF" style="display: none"; onclick="attack('Shadow Flame', 'SF')" >Shadow Flame</button>
<button id ="DS" style="display: none"; onclick="attack('Deadspike', 'DS')" >Deadspike</button>
<button id ="DR" style="display: none"; onclick="attack('Dark Revolver', 'DR')" >Dark Revolver</button><br></br>
<p id = "phase3text" style="display: none";>Phase 3 Attacks :</p>
<button id ="Summon" style="display: none"; onclick="attack('Summon', 'Summon')">Summon</button>
<button id ="Redirect" style="display: none"; onclick="attack('Redirect', 'Redirect')">Redirect</button>
<button id ="BD" style="display: none"; onclick="attack('Black Divinity', 'BD')">Black Divinity</button>
<button id ="Romeida" style="display: none"; onclick="attack('Romeida', 'Romeida')">Romeida</button>
<button id ="Mawaru" style="display: none"; onclick="attack('Mawaru', 'Mawaru')">Mawaru</button>
<br></br>
<p id = "phase4text" style="display: none";>Phase 4 Attacks :</p>
<button id ="DB" style="display: none"; onclick="attack('Dragon Bullet', 'DB')">Dragon Bullet</button>
<button id ="ES" style="display: none"; onclick="attack('Evening Shade', 'ES')">Evening Shade</button>
<button id ="SR" style="display: none; color:"#5d00c8"; onclick="attack('Shadow Riposte', 'SR')">Shadow Riposte</button>
<button id ="EF" style="display: none"; onclick="attack('Evil Fracture', 'EF')">Evil Fracture</button>

<style>
.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.popup {
  background: #111;
  color: #fff;
  padding: 20px;
  width: 300px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 0 20px #5d00ff;

}
.Update_Log {
  background: #111;
  color: #fff;
  padding: 20px;
  width: 400px;
     height: 450px; /* Set a fixed height */
    overflow-y: auto; /* Add vertical scrollbar only when needed */
    border: 1px solid black;
    padding: 10px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 0 20px #5d00ff;

}

.popup button {
  margin-top: 15px;
  padding: 8px 14px;
  background: #5d00ff;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

.popup button:hover {
  background: #7a2cff;
}


</style>
</html>


<script>
let extralife = 0;
let SRcd = false;
let damagedisplay = document.getElementById("damageshow");
let damagemultidisplay = document.getElementById("damagemultishow");
let damagemultiplier = 0;
let damage = 0;
let lifelost = 0;
let venom = 0;
let burnduration = 0;

let timerP = 160;
let phasechange2;
let phasechange3;
let phasechange4;
let guessattempt = false;
let p4initial;
let intervalP = 1000;
let intervalId3;
let dialogue = document.getElementById("dialogue");
let health = document.getElementById("health");
let healthval = health.textContent;

let WFstate = false;
	
let ESlabel = document.getElementById("ESl");
let ESFarstate = false;
let ESNearstate = false;
let ESpara = 2;
let ESduration = 0;

let EFClick = 0;


let phase = 1;
let state = "right";

let lifenews = document.getElementById("lifenews");
let lifenumber = document.getElementById("life1");
let statuseffect = document.getElementById("statuseffect");
let msg = document.getElementById("msg");
let lifecounter = document.getElementById("lifecounter");

///music
const bgm = document.getElementById("bgm");

document.addEventListener("click", () => {
  bgm.play();
  bgm.volume = 0.25;


}, { once: true });


const loading = document.getElementById("loading");
function bgmchange(src, volume, start){
bgm.pause();
bgm.src = src;
bgm.load();
bgm.addEventListener("canplaythrough", function onReady() {
    bgm.removeEventListener("canplaythrough", onReady);
    
    bgm.volume = volume;
    bgm.currentTime = start;
    bgm.play().catch(() => {});
  });

}
function loadsound(src){
return new Promise((resolve)=>{

const a = new Audio();
a.src = src;
a.addEventListener("canplaythrough", resolve, {once: true});
});
}

function loadBGM(){
Promise.all([
  loadsound('songs/Newworldorder.mp3'),
  loadsound('songs/Foralltheuniverse.mp3'),
  loadsound('songs/Blooddraina.mp3')
]).then(() => {
  document.getElementById("loading").style.display = "none";
});}


let counter = false;
let guess = [];
/// p1 combos
const p1Combos = {A : ["SS", "Decap"], B : ["VV", "Decap"], C : ["Fakeout", "SS"], D : ["Fakeout", "TR"], E : ["Dash", "WF"], F : ["WF", "Dash"]};
const p2Combos = {A : ["SV", "DR"], B: ["SS", "SV", "DS"], C: ["DS", "VV"], D: ["VV", "SF"], E: ["Fakeout", "DS"], F : ["DR", "DS"], G: ["TR", "Decap"], H: ["SF", "TR"], I: ["Dash", "SF"], J: ["Dash", "SF", "WF"]};
const p3Combos = {A : ["Summon", "SS", "Romeida", "SV", "DS"], B: ["Summon", "Mawaru", "Redirect", "BD"], C: ["Summon", "SF", "Romeida", "DS"], D: ["Summon", "Mawaru", "Romeida", "VV"], E: ["VV", "Dash", "SS", "DS"], F: ["SS", "SV", "DR", "DS"], G: ["Summon", "SF", "Mawaru", "Redirect", "BD"], H: ["Summon", "SF", "Redirect", "BD"], I: ["Summon", "Mawaru", "Redirect", "Romeida"], J: ["Dash", "DR", "SV", "DS"], K: ["SF", "DR", "DS", "Fakeout"]};
const p4Combos = {A : ["SS", "SV", "DR", "SV", "DS"], B : ["Dash", "Summon", "Redirect", "Romeida", "SR"], C: ["Fakeout", "DS", "Summon", "EF", "VV"], D:["Fakeout", "VV", "Summon", "Redirect", "Romeida"], E:["Summon", "EF", "Decap", "Dash", "SR"], F:["Summon", "SS", "SV", "DR", "SV", "ES"], G:["VV", "Summon", "DB", "BD", "WF"], H:["Dash", "Summon", "SF", "DB", "Romeida"], I:["Fakeout", "Summon", "SF", "ES", "SR"], J:["SF", "Summon", "DB", "Redirect", "ES", "SR"], K:["Summon", "Mawaru", "Romeida", "Summon", "DB", "BD"], L:["Summon", "DR", "SV", "DB", "ES"], M:["SF", "Summon", "Mawaru", "Redirect", "EF"], N:["TR", "SS", "SV", "DR", "DS"]}
const p4Initials = {A : ["Dash", "Fakeout", "VV", "Summon", "Mawaru", "Redirect", "DB", "ES", "SR"]}
let ans = 0;
///
let lnumber = document.getElementById("life1").textContent; /// its life number.. but number.. so lifenumbernumber??
let currentCombo;
let atk = document.getElementById("atk").textContent;
///
let timer = document.getElementById("timer").textContent;
let intervalId;
let intervalId2;
function timerloop(){ intervalId = setInterval(timedisplay, 1000);
} 
function timedisplay(){
if (timer <= 1){
clearInterval(intervalId);
final();
}
timer -= 10;
document.getElementById("timer").textContent = timer/10;
}
timerloop();

/// special attacks ///
function EvilFracture (test){
if (test == true){
currentCombo.push("EF");
}
EFClick = 0;
	intervalId4 = setInterval(timefracturing, 100);
	
} 
function EFQTE(){
EFClick += 1
document.getElementById("progress").textContent = 8 - EFClick;
if(EFClick == 8){
 document.getElementById("EFOverlay").style.display = "none";
document.getElementById("progress").textContent = 8; // refresh
}
}
function timefracturing() {
	if(EFClick == 8||!currentCombo.includes("EF")){
		clearInterval(intervalId4);
		document.getElementById("timerstatus").textContent = "";
		return;
	}
document.getElementById("EFTitle").textContent = "Fractured Time! (2x Speed)";
document.getElementById("EFText").textContent = "SPAM 8 TIMES TO CLEAR REPAIR THE TIME!";
document.getElementById("EFOverlay").style.display = "flex";
if (timer <= 10){
clearInterval(intervalId4);
 document.getElementById("EFOverlay").style.display = "none";
}
timer -= 1;
document.getElementById("timer").textContent = timer/10;
document.getElementById("EFtimer").textContent = timer/10;
document.getElementById("timerstatus").style.color = "#5d00ff";
document.getElementById("timerstatus").textContent = " Fractured Time! (2x Speed)";
}
function openUL(){
clearInterval(intervalId);
document.getElementById("UpdateLog").style.display = "flex";
}

function closeUL(){
document.getElementById("UpdateLog").style.display = "none";
timerloop();
}


function ShadowRiposte (){
counter = true;
dialogue.textContent = "Without a trace...";
setTimeout(function() {
dialogue.textContent = "";
counter = false;
}, 5000)
}

//WF SPINNN ATTACK
function createWF(){
  const orbit = document.createElement("div");
  const orbiter = document.createElement("div");
  let strike = 0;

  orbit.className = "orbit"; // your CSS class
  orbiter.className = "orbiter"; // your CSS class
  document.body.appendChild(orbit);
  orbit.appendChild(orbiter);
function WFlame(){
if(strike > 1){
orbit.remove();
strike = 0;
return;
}
orbit.classList.remove("paused");
orbiter.classList.remove("paused");
setTimeout(WFstrike, 5000)
}
function WFstrike(){
WFstate = true;
strike++;
orbit.classList.add("paused");
orbiter.classList.add("paused");
setTimeout(function(){orbiter.classList.add("strike");}, 500);
setTimeout(function(){ WFlame(); WFstate = false;}, 1000);
console.log("strike");
console.log(strike);

}

WFlame();
  return {orbit, orbiter};
}

// SR counterattack
function Counterattack (){
SRcd = true;
counter = false;
dialogue.textContent = "End of days,"
setTimeout(function(){
dialogue.textContent = "Shadow Riposte!";
lnumber -= 2;
lifenumber.textContent = lnumber;
lifenews.style.color = "#5d00c8";
lifenews.textContent = " Counterattacked! (-2 lives)";
SRcd = false;
}, 1500);
setTimeout(function() {
lifenews.textContent = "";
SRcd = false;
dialogue.textContent = ""
}, 3500)
}

function burnfunction(life){
return; ////////// too lazy to work on this ill remake the status effects into array

damage = life * 0.5;
lifecounter.style.color = "#d25e19";
burnduration = 10;
statuseffect.textContent += " Burned! (-0.5 extra life after " + burnduration + " seconds)";
burn();
}



function burn(){ intervalId3 = setInterval(burndurations, 1000);
} 
function burndurations(){
if (burnduration === 1){
clearInterval(intervalId3);
lifelost += damage;
}
burnduration--;
document.getElementById("statuseffect").textContent = " Burned! (-0.5 extra life after " + burnduration + " seconds)";
}

burnfunction(1);
function venomfunction(duration){
lifecounter.style.color = "#00490c";
statuseffect.textContent += " Poisoned! (-1 extra life if the next guess is wrong)"
venom =+ duration;
}

function cleanse(){
if (venom !== 1){
venom--;
}
else{
venom--;
lifecounter.style.color = "#000000"
statuseffect.textContent = ""; //////////// MAKE SURE TO CHANGE THIS SO IT CAN WORK WITH OTHER EFFECTS
}

}

function EveningShade(){
ESduration--;
	if (currentCombo.includes("ES")){
	ESduration = 2;
	ESpara++;
	ESlabel.style.color = "#800000";
	}
	else if (ESduration <= 0){
	ESNearstate = false;
	ESFarstate = false;
	ESlabel.textContent = "";
	return;
	}
if (ESpara % 2 == 1){
	ESNearstate = false;
	ESFarstate = true;
	ESlabel.textContent = " ('Dawn's Strike' - Combos are locked to far combos for " + ESduration+" combos)";
}
else{
	ESFarstate = false;
	ESNearstate = true;
	ESlabel.textContent = "  ('Dusk's Assault' - Combos are locked to near combos for " + ESduration+" combos)";
	}
}
	
function randomCombo() {
let comboname;
if (phase == 1){
const keys = Object.keys(p1Combos); 
	comboname = p1Combos;
}
else if (phase == 2){
        comboname = p2Combos;
}
else if (phase == 3){
        comboname = p3Combos;
}
else if (phase == 4){
	comboname = p4Combos;
	timerP = 160;
	if (p4initial !== "done"){
	timerP = 210;
	comboname = p4Initials;
	p4initial = "done";
	}
}
	
	
	let Ckeys = Object.keys(comboname); 
	const half = Math.ceil(Ckeys.length / 2);
	if (ESNearstate == true){
		Ckeys = Ckeys.slice(0, half);
		console.log(Ckeys);
	}
	else if (ESFarstate == true){
		Ckeys = Ckeys.slice(half, Ckeys.length);
		console.log(Ckeys);
	}
	const randomKey = Ckeys[Math.floor(Math.random() * Ckeys.length)];
	currentCombo = comboname[randomKey];
		EveningShade();
		EvilFracture();
	if (currentCombo.includes("EF")){
	timer += 50;
}
}

function stricken(){
console.log("noob");
lnumber -= 0.5;
lifenumber.textContent = lnumber;
lifenews.style.color = "#5d00c8";
lifenews.textContent = " Flamestruck! (-0.5 life)";
setTimeout(function(){lifenews.textContent = "";}, 2000);
}
	

///
function attack(name, code){
if (state == "stop") {
    return;
 }
else if (counter == true){
Counterattack();}
if (code == "SR"){
if (SRcd !== true){
ShadowRiposte();
}
else{
return;}}
if (currentCombo.includes("WF")){
	createWF();
	}
if (WFstate == true){
stricken();
}

guessattempt = true;
if (document.getElementById("atk").textContent === " "){
document.getElementById("atk").textContent += name;}
else{
document.getElementById("atk").textContent += " > " + name;}
guess.push(code);
guessattempt = false;
}
randomCombo();
function check(){
console.log("guess:", JSON.stringify(guess));
console.log("current:", JSON.stringify(currentCombo));
if (state == "stop"){
return;
}
else if (counter == true){
Counterattack();
return;
}
else if (WFstate == true){
stricken();
}
ans = 1;
for(n=0; n <= guess.length; n++){
if (guess[n] !== currentCombo[n]){
ans = 0;
break;
}
}
if (ans === 1){
cleanse();
damagemultiplier = ((timerP - (timerP - timer)) / timerP) * 2
damagenumber = Math.floor(350000 + (350000 * damagemultiplier));
damagecarn(damagenumber);
msg.textContent = "Correct!";
damagedisplay.textContent = " (Damage dealt: "+damagenumber+") ";
damagemultidisplay.textContent = "(" + (1+damagemultiplier) + "x)";

setTimeout(function (){
damagedisplay.textContent = "";
damagemultidisplay.textContent = ""; 
}, 3000)
}
else{
msg.textContent = "wrong lozer";


if (venom > 0){
console.log("activated");
lifelost += 1;
cleanse();
}

if (currentCombo.includes("Romeida")){
venomfunction(1);
}

if (currentCombo.includes("SF")){
burnfunction(1);
}

if (currentCombo.includes("Decap")){
DecapSound.currentTime = 39;
DecapSound.play();
setTimeout(function() {
    DecapSound.pause();
    DecapSound.currentTime = 39;
  }, 1000);
lifelost += 3;
lifenews.style.color = "#8e0000";
lifenews.textContent += " Decapitated! (-3 Lives)"
setTimeout(function (){lifenews.textContent =  "";
}, 3000)
}
else{
lifelost += 1;
}
lnumber = lnumber - lifelost;
lifenumber.textContent = lnumber;
}
timer = 40;
state = "stop";
lifelost = 0;
}
i = 0;
function imgcombo(combo){
const container = document.getElementById("imgattack");
var imageUrl;
setTimeout(imgs(), 1000);

function imgs(){
let atkname = combo[i];
const newImg = document.createElement('img');
if (i >= currentCombo.length){
i = 0;
return;
}
if (atkname == "SS"){
console.log("ss");
var imageUrl = 'images/SS.webp';
}
else if (atkname == "Decap"){
console.log("decap")
var imageUrl = 'images/DECAP.webp';
}
else if (atkname == "VV"){
var imageUrl = 'images/VV.webp';
}
else if (atkname == "Dash"){
var imageUrl = 'images/DASH.webp';
}
else if (atkname== "Fakeout"){
var imageUrl = 'images/FAKEOUT.webp';
}
else if (atkname == "TR"){
var imageUrl = 'images/TR.webp';
}
else if (atkname == "WF"){
var imageUrl = 'images/WF.webp';
}
else if (atkname == "SF"){
var imageUrl = 'images/SF.webp';
}
else if (atkname == "DS"){
var imageUrl = 'images/DS.webp';
}
else if (atkname == "DR"){
var imageUrl = 'images/DR.webp';
}
else if (atkname == "SV"){
var imageUrl = 'images/SV.webp';
}
else if (atkname == "Summon"){
var imageUrl = 'images/SUMMON.webp';
}
else if (atkname == "Redirect"){
var imageUrl = 'images/REDIRECT.webp';
}
else if (atkname == "Mawaru"){
var imageUrl = 'images/MAWARU.webp';
}
else if (atkname == "BD"){
var imageUrl = 'images/BD.webp';
}
else if (atkname == "Romeida"){
var imageUrl = 'images/ROMEIDA.webp';
}
else if (atkname == "DB"){
var imageUrl = 'images/DB.webp';
}
else if (atkname == "ES"){
var imageUrl = 'images/ES.webp';
}
else if (atkname == "SR"){
var imageUrl = 'images/SR.webp';
}
else if (atkname == "EF"){
var imageUrl = 'images/EF.webp';
}
newImg.src = imageUrl;
newImg.width = 75;
newImg.height = 75;
newImg.onload = function(){
container.appendChild(newImg);
i++;
console.log(i)
setTimeout(function(){imgcombo(combo)}, intervalP);
};
}

}
function backspace (){
guess.pop()
  const atkEl = document.getElementById("atk");

  let names = atkEl.textContent.trim().split(" > ");

  names.pop();

  atkEl.textContent = names.length ? names.join(" > ") : " ";
}

function clearcombo(){
console.log("cleared");
document.getElementById("atk").textContent = " ";
guess.length = 0;
}
imgcombo(currentCombo); ////testing

function reset(){
state = "right";
document.getElementById("timerstatus").textContent = ""
document.getElementById("imgattack").innerHTML = '';
timer = timerP;
if (currentCombo.includes("SR")) {timer += 40;}
timerloop();
}

function nextphase(){
phase += 1;
if (phase == 2){
phasechange2 = "done";
bgmchange('songs/Newworldorder.mp3', 0.25, 0);

timerP = 120;
intervalP = 500;
dialogue.textContent = "Black Magic.";
setTimeout(function(){ dialogue.textContent = "";
}, 3000)
showButtons('SV');
showButtons('SF');
showButtons('DS');
showButtons('DR');
document.getElementById("phase2text").style.display = "inline-block";
}
if (phase == 3){
bgmchange('songs/Foralltheuniverse.mp3', 0.25, 17.3);
phasechange3 = "done";
timerP = 160;
intervalP = 200;
dialogue.textContent = "Sorcerer's Ancestry...";
setTimeout(function(){dialogue.textContent = "Dragonborn.";
}, 3000)
setTimeout(function(){dialogue.textContent = "";
}, 6000)

showButtons('BD');
showButtons('Summon');
showButtons('Redirect');
showButtons('Mawaru');
showButtons('Romeida');
document.getElementById("phase3text").style.display = "inline-block";
}

if (phase == 4){
phasechange4 = "done";
bgmchange('songs/Blooddraina.mp3', 0.25, 0);
timerP = 160;
intervalP = 200;
dialogue.textContent = "...Insignificant.";
setTimeout(function(){dialogue.textContent = "Pest.";
}, 3000)
setTimeout(function(){dialogue.textContent = "I will not forget what I am here for.";
}, 6000)
setTimeout(function(){dialogue.textContent = "Remember, you brought this upon yourself.";
}, 9000)
setTimeout(function(){dialogue.textContent = "";
}, 12000)

showButtons('EF');
showButtons('ES');
showButtons('SR');
showButtons('DB');
document.getElementById("phase4text").style.display = "inline-block";
}


}
function showButtons(name){
let button = document.getElementById(name);
button.style.width = "120px";
button.style.height = "30px";
button.style.display = "inline-block";
}
function damagecarn(x){
healthval -= x;
health.textContent = healthval;
if (healthval <= 11000000 && phasechange2 !== "done"){
nextphase();
}
if (healthval <= 9775000 && phasechange3 !== "done"){
nextphase();
}
if (healthval <= 6505000 && phasechange4 !== "done"){
nextphase();
}
}
function final(){
check();
clearcombo();
randomCombo();
reset();
imgcombo(currentCombo);
}

function openPopup(title, text) {
document.getElementById("popupTitle").textContent = title;
  document.getElementById("popupText").textContent = text;
  document.getElementById("popupOverlay").style.display = "flex";
}
openPopup(
  "Carnellio",
  "Guess the combo before time runs out."
);
function closePopup() {
  document.getElementById("popupOverlay").style.display = "none";
  loadBGM();
}



</script>





























































